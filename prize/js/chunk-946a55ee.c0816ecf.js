(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-946a55ee"],{"003d":function(t,e,n){"use strict";var r=n("3988"),i=n.n(r);i.a},"0e7a":function(t,e,n){},1148:function(t,e,n){"use strict";var r=n("a691"),i=n("1d80");t.exports="".repeat||function(t){var e=String(i(this)),n="",a=r(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},1276:function(t,e,n){"use strict";var r=n("d784"),i=n("44e7"),a=n("825a"),s=n("1d80"),o=n("4840"),c=n("8aa5"),u=n("50c4"),l=n("14c3"),h=n("9263"),p=n("d039"),f=[].push,d=Math.min,g=4294967295,v=!p((function(){return!RegExp(g,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(s(this)),a=void 0===n?g:n>>>0;if(0===a)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,a);var o,c,u,l=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,v=new RegExp(t.source,p+"g");while(o=h.call(v,r)){if(c=v.lastIndex,c>d&&(l.push(r.slice(d,o.index)),o.length>1&&o.index<r.length&&f.apply(l,o.slice(1)),u=o[0].length,d=c,l.length>=a))break;v.lastIndex===o.index&&v.lastIndex++}return d===r.length?!u&&v.test("")||l.push(""):l.push(r.slice(d)),l.length>a?l.slice(0,a):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=s(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,i,n):r.call(String(i),e,n)},function(t,i){var s=n(r,t,this,i,r!==e);if(s.done)return s.value;var h=a(t),p=String(this),f=o(h,RegExp),m=h.unicode,x=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(v?"y":"g"),w=new f(v?h:"^(?:"+h.source+")",x),b=void 0===i?g:i>>>0;if(0===b)return[];if(0===p.length)return null===l(w,p)?[p]:[];var y=0,C=0,R=[];while(C<p.length){w.lastIndex=v?C:0;var z,N=l(w,v?p:p.slice(C));if(null===N||(z=d(u(w.lastIndex+(v?0:C)),p.length))===y)C=c(p,C,m);else{if(R.push(p.slice(y,C)),R.length===b)return R;for(var k=1;k<=N.length-1;k++)if(R.push(N[k]),R.length===b)return R;C=y=z}}return R.push(p.slice(y)),R}]}),!v)},"215a":function(t,e,n){"use strict";var r=n("47dc"),i=n.n(r);i.a},3988:function(t,e,n){},"408a":function(t,e,n){var r=n("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},"44e7":function(t,e,n){var r=n("861d"),i=n("c6b6"),a=n("b622"),s=a("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},"47dc":function(t,e,n){},"4e82":function(t,e,n){"use strict";var r=n("23e7"),i=n("1c0b"),a=n("7b0b"),s=n("d039"),o=n("b301"),c=[],u=c.sort,l=s((function(){c.sort(void 0)})),h=s((function(){c.sort(null)})),p=o("sort"),f=l||!h||p;r({target:"Array",proto:!0,forced:f},{sort:function(t){return void 0===t?u.call(a(this)):u.call(a(this),i(t))}})},"4f3e":function(t,e,n){"use strict";var r=n("6853"),i=n.n(r);i.a},5650:function(t,e,n){t.exports=n.p+"img/1.445c9d34.jpg"},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),i=n("5899"),a="["+i+"]",s=RegExp("^"+a+a+"*"),o=RegExp(a+a+"*$"),c=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(s,"")),2&t&&(n=n.replace(o,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},6853:function(t,e,n){},7156:function(t,e,n){var r=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var a,s;return i&&"function"==typeof(a=e.constructor)&&a!==n&&r(s=a.prototype)&&s!==n.prototype&&i(t,s),t}},"78ae":function(t,e,n){"use strict";var r=n("0e7a"),i=n.n(r);i.a},"7db0":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").find,a=n("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},"99af":function(t,e,n){"use strict";var r=n("23e7"),i=n("d039"),a=n("e8b5"),s=n("861d"),o=n("7b0b"),c=n("50c4"),u=n("8418"),l=n("65f0"),h=n("1dde"),p=n("b622"),f=n("60ae"),d=p("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",m=f>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),x=h("concat"),w=function(t){if(!s(t))return!1;var e=t[d];return void 0!==e?!!e:a(t)},b=!m||!x;r({target:"Array",proto:!0,forced:b},{concat:function(t){var e,n,r,i,a,s=o(this),h=l(s,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(a=-1===e?s:arguments[e],w(a)){if(i=c(a.length),p+i>g)throw TypeError(v);for(n=0;n<i;n++,p++)n in a&&u(h,p,a[n])}else{if(p>=g)throw TypeError(v);u(h,p++,a)}return h.length=p,h}})},"9a46":function(t,e,n){},"9c7d":function(t,e,n){t.exports=n.p+"img/1.462c0a4c.jpg"},a9e3:function(t,e,n){"use strict";var r=n("83ab"),i=n("da84"),a=n("94ca"),s=n("6eeb"),o=n("5135"),c=n("c6b6"),u=n("7156"),l=n("c04e"),h=n("d039"),p=n("7c73"),f=n("241c").f,d=n("06cf").f,g=n("9bf2").f,v=n("58a8").trim,m="Number",x=i[m],w=x.prototype,b=c(p(w))==m,y=function(t){var e,n,r,i,a,s,o,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=v(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=u.slice(2),s=a.length,o=0;o<s;o++)if(c=a.charCodeAt(o),c<48||c>i)return NaN;return parseInt(a,r)}return+u};if(a(m,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var C,R=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof R&&(b?h((function(){w.valueOf.call(n)})):c(n)!=m)?u(new x(y(e)),n,R):y(e)},z=r?f(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;z.length>N;N++)o(x,C=z[N])&&!o(R,C)&&g(R,C,d(x,C));R.prototype=w,w.constructor=R,s(i,m,R)}},af66:function(t,e,n){},b0c0:function(t,e,n){var r=n("83ab"),i=n("9bf2").f,a=Function.prototype,s=a.toString,o=/^\s*function ([^ (]*)/,c="name";!r||c in a||i(a,c,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},b15c:function(t,e,n){"use strict";var r=n("af66"),i=n.n(r);i.a},b3ef:function(t,e,n){t.exports=n.p+"media/background.2294b3fb.mp4"},b680:function(t,e,n){"use strict";var r=n("23e7"),i=n("a691"),a=n("408a"),s=n("1148"),o=n("d039"),c=1..toFixed,u=Math.floor,l=function(t,e,n){return 0===e?n:e%2===1?l(t,e-1,n*t):l(t*t,e/2,n)},h=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},p=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){c.call({})}));r({target:"Number",proto:!0,forced:p},{toFixed:function(t){var e,n,r,o,c=a(this),p=i(t),f=[0,0,0,0,0,0],d="",g="0",v=function(t,e){var n=-1,r=e;while(++n<6)r+=t*f[n],f[n]=r%1e7,r=u(r/1e7)},m=function(t){var e=6,n=0;while(--e>=0)n+=f[e],f[e]=u(n/t),n=n%t*1e7},x=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==f[t]){var n=String(f[t]);e=""===e?n:e+s.call("0",7-n.length)+n}return e};if(p<0||p>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(d="-",c=-c),c>1e-21)if(e=h(c*l(2,69,1))-69,n=e<0?c*l(2,-e,1):c/l(2,e,1),n*=4503599627370496,e=52-e,e>0){v(0,n),r=p;while(r>=7)v(1e7,0),r-=7;v(l(10,r,1),0),r=e-1;while(r>=23)m(1<<23),r-=23;m(1<<r),v(1,1),m(2),g=x()}else v(0,n),v(1<<-e,0),g=x()+s.call("0",p);return p>0?(o=g.length,g=d+(o<=p?"0."+s.call("0",p-o)+g:g.slice(0,o-p)+"."+g.slice(o-p))):g=d+g,g}})},bf74:function(t,e,n){"use strict";var r=n("9a46"),i=n.n(r);i.a},bfad:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page"},[r("video",{attrs:{src:n("b3ef"),autoplay:"",loop:"",muted:""},domProps:{muted:!0}}),r("lucky",{ref:"Lucky",attrs:{users:t.users,level:t.level}}),t.showMenu?r("ul",{staticClass:"menu"},[r("li",{directives:[{name:"show",rawName:"v-show",value:t.level&&!t.showNext&&!t.isStart,expression:"level && !showNext && !isStart"}],staticClass:"active",on:{click:t.startLucky}},[t._v("开始抽奖")]),r("li",{directives:[{name:"show",rawName:"v-show",value:t.level&&!t.showNext&&t.isStart,expression:"level && !showNext && isStart"}],staticClass:"active",on:{click:t.stopLucky}},[t._v("停止抽奖")]),r("li",{directives:[{name:"show",rawName:"v-show",value:t.level&&t.showNext,expression:"level && showNext"}],staticClass:"active",on:{click:t.next}},[t._v("下一轮")]),r("li",{directives:[{name:"show",rawName:"v-show",value:!t.isStart,expression:"!isStart"}],on:{click:t.showResultDialog}},[t._v("全部结果")])]):t._e(),r("div",{staticClass:"reset"},[r("img",{attrs:{src:n("dfc2"),alt:""}}),r("img",{attrs:{src:n("ffc4"),alt:""},on:{click:t.reset}})]),r("prize-dialog",{attrs:{prize:t.prize,visible:t.showPrize},on:{"update:visible":function(e){t.showPrize=e}}}),r("winners-dialog",{attrs:{winners:t.winners,visible:t.showWinners},on:{"update:visible":function(e){t.showWinners=e}}}),r("result-dialog",{attrs:{list:t.prizeRecordList,users:t.users,visible:t.showResult},on:{"update:visible":function(e){t.showResult=e}}})],1)},i=[],a=(n("a4d3"),n("99af"),n("4de4"),n("7db0"),n("d81d"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("9e1f"),n("450d"),n("6ed5")),s=n.n(a),o=(n("0fb7"),n("f529")),c=n.n(o),u=n("ade3"),l=(n("96cf"),n("1da1")),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scene"},[n("div",{staticClass:"box",style:t.boxStyle},[n("ul",{staticClass:"ring"},t._l(t.list,(function(t,e){return n("li",{key:e,style:{opacity:t.opacity,transform:t.transform,transition:t.transition}},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.avatar,alt:""}})])])})),0)]),n("div",t._l(t.list,(function(e,r){return n("img",{directives:[{name:"show",rawName:"v-show",value:t.showCenter&&r===t.showIndex,expression:"showCenter && index === showIndex"}],staticClass:"center",attrs:{src:e.avatar,alt:""}})})),0)])},p=[],f=(n("a9e3"),n("b680"),n("ac1f"),n("1276"),function(t,e){var n=t.split(""),r=/\w/,i=0;return n.forEach((function(t){r.test(t)?i+=e/5*3:i+=e})),i}),d=function(t,e,n,r){return new Promise((function(i,a){var s=new Image;s.onload=function(){var a=[];e.clearRect(0,0,t.width,t.height),e.drawImage(s,0,0,n,r);for(var o=e.getImageData(0,0,n,r),c=5,u=0;u<r;u+=c)for(var l=0;l<n;l+=c){for(var h=0,p=0;p<c*c;p++){var f=p%c,d=~~(p/c),g=o.data[4*((u+d)*n+l+f)+0],v=o.data[4*((u+d)*n+l+f)+1],m=o.data[4*((u+d)*n+l+f)+2];g<10&&v<10&&m<10&&h++}h<c*c/3*2&&a.push({x:l-n/2,y:u-r/2})}i(a)},s.onerror=a,s.src=t.toDataURL("image/jpeg"),document.getElementsByTagName("body")[0].appendChild(s)}))},g=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var n,r,i,a,s,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"KaiTi",r=100,i=f(e,r),a=document.createElement("canvas"),a.width=i,a.height=r,s=a.getContext("2d"),s.font=r+"px "+n,s.fillStyle="orange",s.fillText(e,0,r/5*4),t.next=12,d(a,s,i,r);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=g,m=320,x=function(t){return new Promise((function(e){return setTimeout(e,t)}))},w={props:{users:{type:Array,default:[]},level:{type:Number,default:0}},data:function(){return{list:[],boxStyle:{},angleX:0,angleY:0,showIndex:0,showCenter:!1}},methods:{changeStart:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v("2020年年会");case 2:return e=t.sent,this.changeToText(e),this.changeToText(e).closeUp(),this.transparent(),t.next=8,x(300);case 8:return this.changeToText(e).closeUp(),this.transition(2),this.autoRotate("text1"),t.next=13,x(3e3);case 13:return this.changeToText(e).dispersal(),this.transition(2),t.next=17,x(3e3);case 17:return t.next=19,v("抽奖环节");case 19:return n=t.sent,this.changeToText(n),this.transparent(),this.changeToText(n).dispersal(),t.next=25,x(300);case 25:return this.changeToText(n).closeUp(),this.transition(2),this.autoRotate("text2"),t.next=30,x(5e3);case 30:return this.changeToText(n).dispersal(),this.transition(2),t.next=34,x(2e3);case 34:return t.next=36,this.clock();case 36:return this.changeToCircle().dispersal(),this.transparent(),t.next=40,x(300);case 40:return t.next=42,this.change();case 42:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),change:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return this.changeToCone().dispersal(),this.transparent(),t.next=5,x(300);case 5:return n=["drawCone","drawColumn2","drawCircle"],r=this.level>0?this.level-1:n.length-1,t.next=9,this[n[r%n.length]]();case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),drawCircle:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.autoRotate("rotate"),this.changeToCircle().closeUp(),this.transition(2),t.next=5,x(2e3);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),drawColumn:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.autoRotate("rotate"),this.changeToColumn().closeUp(),this.transition(2),t.next=5,x(2e3);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),drawColumn2:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.autoRotate("rotate"),this.changeToColumn2().closeUp(),this.transition(2),t.next=5,x(2e3);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),drawCone:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.autoRotate("rotate"),this.changeToCone().closeUp(),this.transition(2),t.next=5,x(2e3);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),clock:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.autoRotate("stop"),e=0;case 2:if(!(e<3)){t.next=8;break}return t.next=5,this.changeToNum(3-e);case 5:e++,t.next=2;break;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeToNum:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v(String(e));case 2:return n=t.sent,this.changeToText(n),this.transparent(),this.changeToText(n).dispersal(),t.next=8,x(300);case 8:return this.changeToText(n).closeUp(),this.transition(3),t.next=12,x(2e3);case 12:return this.changeToText(n).dispersal(),this.transition(3),t.next=16,x(1200);case 16:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),transparent:function(){this.list.forEach((function(t){t.opacity=0}))},transition:function(t){this.list.forEach((function(e){1===t&&(e.transition="opacity .6s"),2===t&&(e.transition="all .6s "+Math.random()+"s"),3===t&&(e.transition="all .6s "+.3*Math.random()+"s")}))},autoRotate:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"text1"===e&&(this.boxStyle={animation:"text1 6s linear infinite"}),"text2"===e&&(this.boxStyle={animation:"text2 12s linear infinite"}),"rotate"===e&&(this.boxStyle={animation:"rotate 12s linear infinite"}),"stop"===e&&(this.boxStyle={});case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeToText:function(t){var e=this;this.list=[],this.list=t.map((function(t,n){return JSON.parse(JSON.stringify(e.users[n%e.users.length]))}));var n=function(){e.list.forEach((function(e,n){e.opacity=1,e.transform="translate3D(".concat(8*t[n].x,"px,").concat(8*t[n].y,"px,").concat(-1580,"px) rotateY(0) rotateX(0)")}))},r=function(){e.list.forEach((function(e,n){e.opacity=1,e.transform="translate3D(".concat(20*t[n].x*Math.random(),"px,").concat(20*t[n].y*Math.random(),"px,",1600,"px) rotateY(0) rotateX(0)")}))};return{closeUp:n,dispersal:r}},changeToCircle:function(){var t=this,e=Array.apply(null,Array(200)).map((function(e,n){return JSON.parse(JSON.stringify(t.users[n%t.users.length]))}));this.list=this.setCircle(e);var n=function(){t.list.forEach((function(t){t.opacity=1,t.transform="translate3D(".concat(t.circleX,"px,").concat(t.circleY,"px,").concat(t.circleZ,"px) rotateY(").concat(t.circlePhi,"rad) rotateX(").concat(t.circleTheta-Math.PI/2,"rad)")}))},r=function(){t.list.forEach((function(t){t.opacity=1,t.transform="translate3D(".concat(t.bigCircleX,"px,").concat(t.bigCircleY,"px,").concat(t.bigCircleZ,"px) rotateY(").concat(t.circlePhi,"rad) rotateX(").concat(t.circleTheta-Math.PI/2,"rad)")}))};return{closeUp:n,dispersal:r}},changeToColumn:function(){var t=this,e=Array.apply(null,Array(200)).map((function(e,n){return JSON.parse(JSON.stringify(t.users[n%t.users.length]))}));this.list=this.setColumn(e);var n=this.getCircleArr(e),r=Math.floor(e.length/(n.length-2)),i=r*(n.length-2),a=function(){t.list.forEach((function(t,e){e>=i?t.opacity=0:(t.opacity=1,t.transform="translate3D(".concat(t.columnX,"px,").concat(t.columnY,"px,").concat(t.columnZ,"px) rotateY(").concat(t.columnPhi,"rad) rotateX(0rad)"))}))},s=function(){t.list.forEach((function(t){index>=i?t.opacity=0:(t.opacity=1,t.transform="translate3D(".concat(t.bigColumnX,"px,").concat(t.bigColumnY,"px,").concat(t.bigColumnZ,"px) rotateY(").concat(t.columnPhi,"rad) rotateX(0rad)"))}))};return{closeUp:a,dispersal:s}},changeToColumn2:function(){var t=this,e=Array.apply(null,Array(200)).map((function(e,n){return JSON.parse(JSON.stringify(t.users[n%t.users.length]))}));this.list=this.setColumn(e);var n=this.getCircleArr(e),r=Math.floor(e.length/(n.length-2)),i=r*(n.length-2),a=function(){t.list.forEach((function(t,e){e>=i?t.opacity=0:(t.opacity=1,t.transform="translate3D(".concat(t.column2X,"px,").concat(t.column2Y,"px,").concat(t.column2Z,"px) rotateY(").concat(t.column2Phi,"rad) rotateX(0rad)"))}))},s=function(){t.list.forEach((function(t){index>=i?t.opacity=0:(t.opacity=1,t.transform="translate3D(".concat(t.bigColumn2X,"px,").concat(t.bigColumn2Y,"px,").concat(t.bigColumn2Z,"px) rotateY(").concat(t.column2Phi,"rad) rotateX(0rad)"))}))};return{closeUp:a,dispersal:s}},changeToCone:function(){var t=this,e=Array.apply(null,Array(200)).map((function(e,n){return JSON.parse(JSON.stringify(t.users[n%t.users.length]))})),n=this.setCone(e),r=n.list,i=n.coneNum;this.list=r;var a=function(){t.list.forEach((function(t,e){e>=i?t.opacity=0:(t.opacity=1,t.transform="translate3D(".concat(t.coneX,"px,").concat(t.coneY,"px,").concat(t.coneZ,"px) rotateY(").concat(t.conePhi,"rad) rotateX(").concat(t.coneTheta,"rad)"))}))},s=function(){t.list.forEach((function(t,e){e>=i?t.opacity=0:(t.opacity=1,t.transform="translate3D(".concat(t.bigConeX,"px,").concat(t.bigConeY,"px,").concat(t.bigConeZ,"px) rotateY(").concat(t.conePhi,"rad) rotateX(").concat(t.coneTheta,"rad)"))}))};return{closeUp:a,dispersal:s}},getCircleArr:function(t){for(var e=[],n=-1,r=0,i=0,a=4;a<13;a++){if(i=a*a+(a+1)*(a+1),i>=t){r=2*(a-1)+1;break}r=2*(a-1)+1}for(var s=0;s<r;s++)s<(r+1)/2?n+=2:n-=2,e.push(n);return e},setCircle:function(t){for(var e=[],n=0,r=this.getCircleArr(t.length),i=0;i<r.length;i++)for(var a=Math.PI/r.length,s=2*Math.PI/r[i],o=0;o<r[i];o++){var c=t[n];n++,c&&(this.setCircleItem(c,r,a,s,i,o),e.push(c))}return e},setCircleItem:function(t,e,n,r,i,a){t.circleX=m*Math.sin(n*i)*Math.sin(r*a),t.circleY=-m*Math.cos(n*i),t.circleZ=m*Math.sin(n*i)*Math.cos(r*a),t.circleTheta=n*(e.length-i),t.circlePhi=r*a,t.bigCircleX=(m+2e3)*Math.sin(n*i)*Math.sin(r*a),t.bigCircleY=-(m+2e3)*Math.cos(n*i),t.bigCircleZ=(m+2e3)*Math.sin(n*i)*Math.cos(r*a)},setColumn:function(t){for(var e=[],n=0,r=this.getCircleArr(t.length),i=Math.floor(t.length/(r.length-2)),a=0;a<r.length-1;a++)for(var s=2*Math.PI/i,o=0;o<i;o++){var c=t[n];this.setColumnItem(c,r,s,a,o),this.setColumnItem2(c,r,s,a,o),e.push(c),n++}return e},setColumnItem:function(t,e,n,r,i){t.columnX=m/1.5*Math.sin(n*i),t.columnY=2*m/(e.length-2)*r-300,t.columnZ=(m/1.5*Math.cos(n*i)).toFixed(2),t.columnPhi=n*i,t.bigColumnX=(m+2e3)/1.5*Math.sin(n*i),t.bigColumnY=2*(m+2e3)/(e.length-2)*r+50-2e3,t.bigColumnZ=((m+2e3)/1.5*Math.cos(n*i)).toFixed(2)},setColumnItem2:function(t,e,n,r,i){t.column2X=m/1.5*Math.sin(n*i+r*Math.PI/180*8),t.column2Y=2*m/(e.length-2)*r-300,t.column2Z=(m/1.5*Math.cos(n*i+r*Math.PI/180*8)).toFixed(2),t.column2Phi=n*i+r*Math.PI/180*8,t.bigColumn2X=(m+2e3)/1.5*Math.sin(n*i+r*Math.PI/180*8),t.bigColumn2Y=2*(m+2e3)/(e.length-2)*r+50-2e3,t.bigColumn2Z=((m+2e3)/1.5*Math.cos(n*i+r*Math.PI/180*8)).toFixed(2)},setCone:function(t){for(var e=[],n=0,r=[],i=0,a=0;a<t.length;a++){if(n+=2*a+1,n>t.length){n-=2*a+1;break}r.push(2*a+1)}for(var s=0,o=0;o<r.length;o++){i=2*Math.PI/r[o];for(var c=0;c<r[o];c++){var u=t[s];this.setConeItem(u,i,o,c,r),e.push(u),s++}}return{list:e,coneNum:n}},setConeItem:function(t,e,n,r,i){t.coneX=2*m/i.length*n*Math.tan(30*Math.PI/180)*Math.sin(e*r),t.coneY=2*m/i.length*n-380,t.coneZ=2*m/i.length*n*Math.tan(30*Math.PI/180)*Math.cos(e*r),t.coneTheta=Math.PI/6,t.conePhi=e*r,t.bigConeX=2*(m+2e3)/i.length*n*Math.tan(30*Math.PI/180)*Math.sin(e*r),t.bigConeY=2*(m+2e3)/i.length*n-380-2e3,t.bigConeZ=2*(m+2e3)/i.length*n*Math.tan(30*Math.PI/180)*Math.cos(e*r)},start:function(){var t=this;this.timer&&clearInterval(this.timer),this.showCenter=!0,this.timer=setInterval((function(){t.showIndex=Math.random()*(t.list.length-1)|0}),20)},stop:function(){this.showCenter=!1,this.timer&&clearInterval(this.timer)}}},b=w,y=(n("bf74"),n("78ae"),n("2877")),C=Object(y["a"])(b,h,p,!1,null,"3aac4c42",null),R=C.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"bg",on:{click:function(e){return t.$emit("update:visible",!1)}}},[n("li",{on:{click:function(e){return e.stopPropagation(),t.empty(e)}}},[n("div",{staticClass:"img"},[n("img",{attrs:{src:t.prize.img,alt:""}})]),n("p",[t._v(t._s(t.NumberToChinese(t.prize.prizeLevel))+"等奖："+t._s(t.prize.prizeName))])])])])},N=[],k=["零","一","二","三","四","五","六","七","八","九"],O=["","万","亿","万亿","兆","亿兆"],T=["","十","百","千"];function I(t){var e="",n="",r=0,i=!0;while(t>0){var a=t%10;0===a?i||(i=!0,n=k[a]+n):(i=!1,e=k[a],e+=T[r],n=e+n),r++,t=Math.floor(t/10)}return n}function M(t){var e=0,n="",r="",i=!1,a=t;if(0===t)return k[0];while(t>0){var s=t%1e4;i&&(r=k[0]+r),n=I(s),n+=0!==s?O[e]:O[0],r=n+r,i=s<1e3&&s>0,t=Math.floor(t/1e4),e++}return a>=10&&a<20&&(r=r.substring(1)),r}var P=M,L={props:{prize:{type:Object,default:{}},visible:{type:Boolean,default:!1}},methods:{NumberToChinese:P,empty:function(){}}},j=L,E=(n("b15c"),Object(y["a"])(j,z,N,!1,null,"48b48cca",null)),S=E.exports,_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"bg",on:{click:function(e){return t.$emit("update:visible",!1)}}},[r("ul",t._l(t.winners,(function(e){return r("li",[r("div",{staticClass:"img"},[r("div",{staticClass:"avatar"},[r("img",{attrs:{src:e.avatar,alt:""}})]),r("img",{staticClass:"out",attrs:{src:n("32fd"),alt:""}}),r("img",{staticClass:"in",attrs:{src:n("2d09"),alt:""}})]),r("div",{staticClass:"tag"},[r("span",[t._v(t._s(e.name))]),r("span",[t._v(t._s(e.dept))])])])})),0)])])},A=[],X={props:{winners:{type:Array,default:[]},visible:{type:Boolean,default:!1}},data:function(){return{}}},Y=X,D=(n("4f3e"),Object(y["a"])(Y,_,A,!1,null,"e72bb2aa",null)),U=D.exports,$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"bg",on:{click:function(e){return t.$emit("update:visible",!1)}}},[r("ul",t._l(t.result,(function(e){return r("li",[r("div",{staticClass:"title"},[t._v(t._s(t.NumberToChinese(e.prize.prizeLevel))+"等奖："+t._s(e.prize.prizeName))]),r("div",{staticClass:"winners"},t._l(e.winners,(function(e){return r("div",{staticClass:"winner"},[r("div",{staticClass:"img"},[r("div",{staticClass:"avatar"},[r("img",{attrs:{src:e.avatar,alt:""}})]),r("img",{staticClass:"out",attrs:{src:n("32fd"),alt:""}}),r("img",{staticClass:"in",attrs:{src:n("2d09"),alt:""}})]),r("div",{staticClass:"tag"},[r("span",[t._v(t._s(e.name))]),r("span",[t._v(t._s(e.dept))])])])})),0)])})),0)])])},F=[],Z=(n("4e82"),{props:{list:{type:Array,default:[]},users:{type:Array,default:[]},visible:{type:Boolean,default:!1}},computed:{result:function(){var t=this,e=[];return this.list.forEach((function(t){e.every((function(e){return e.prizeLevel!==t.prizeLevel}))&&e.push(t)})),e.map((function(e){return{prize:e,winners:t.list.filter((function(t){return t.prizeLevel===e.prizeLevel})).map((function(e){return t.users.find((function(t){return t.name===e.userName&&t.dept===e.dept}))||{}}))}})).sort((function(t,e){return t.prize.prizeLevel-e.prize.prizeLevel}))}},methods:{NumberToChinese:P}}),J=Z,W=(n("215a"),Object(y["a"])(J,$,F,!1,null,"79b81def",null)),q=W.exports,B=n("365c");function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){Object(u["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K={name:"prize",components:{Lucky:R,PrizeDialog:S,WinnersDialog:U,ResultDialog:q},data:function(){return{users:[],isStart:!1,showMenu:!1,prizeList:[],level:0,prizeRecordList:[],winners:[],showPrize:!1,showWinners:!1,showResult:!1,showNext:!1}},computed:{prize:function(){var t=this;return this.prizeList.find((function(e){return e.prizeLevel===t.level}))||{}}},mounted:function(){this.init()},methods:{init:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.queryUserList(),this.queryPrizeList(),this.queryPrizeRecordList()]);case 2:return this.level=this.prizeList[this.prizeList.length-1].prizeLevel,this.prizeRecordList.forEach((function(t){t.prizeLevel<=e.level&&(e.level=t.prizeLevel-1)})),t.next=6,this.$nextTick();case 6:if(!(this.level<this.prizeList.length)){t.next=11;break}return t.next=9,this.$refs.Lucky.change(!0);case 9:t.next=13;break;case 11:return t.next=13,this.$refs.Lucky.changeStart();case 13:this.showMenu=!0,this.level>0&&(this.showPrize=!0);case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),queryUserList:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(B["e"])({pid:this.$store.state.actData.id});case 2:e=t.sent,this.users=[],n=0;case 5:if(!(n<e.data.length)){t.next=19;break}return t.t0=this.users,t.t1=G,t.t2={},t.t3=e.data[n],t.next=12,this.getImg("./users/".concat(e.data[n].id,".jpg"),"users");case 12:t.t4=t.sent,t.t5={avatar:t.t4},t.t6=(0,t.t1)(t.t2,t.t3,t.t5),t.t0.push.call(t.t0,t.t6);case 16:n++,t.next=5;break;case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),queryPrizeList:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(B["c"])({pid:this.$store.state.actData.id});case 2:if(e=t.sent,e.data&&0!==e.data.length){t.next=6;break}return c()({message:"暂无奖品信息",type:"error",duration:5e3}),t.abrupt("return");case 6:this.prizeList=[],n=0;case 8:if(!(n<e.data.length)){t.next=22;break}return t.t0=this.prizeList,t.t1=G,t.t2={},t.t3=e.data[n],t.next=15,this.getImg("./prize/".concat(e.data[n].id,".jpg"),"prize");case 15:t.t4=t.sent,t.t5={img:t.t4},t.t6=(0,t.t1)(t.t2,t.t3,t.t5),t.t0.push.call(t.t0,t.t6);case 19:n++,t.next=8;break;case 22:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),queryPrizeRecordList:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(B["d"])({pid:this.$store.state.actData.id});case 2:e=t.sent,this.prizeRecordList=e.data;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),savePrizeRecord:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.map((function(t){return{dept:t.dept,userName:t.name,prizeId:r.prize.id,prizeLevel:r.prize.prizeLevel,prizeName:r.prize.prizeName}})),this.prizeRecordList=this.prizeRecordList.concat(n),t.next=4,Object(B["f"])({prizeRecordJson:n});case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),deletePrizeRecord:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(B["a"])();case 2:c()({message:"重置成功",type:"success",duration:3e3});case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),getImg:function(t,e){return new Promise((function(r){var i=new Image;i.onerror=function(){r(n("dc36")("./".concat(e,"/1.jpg")))},i.onload=function(){r(t)},i.src=t}))},startLucky:function(){this.prize.amount>this.users.length-this.prizeRecordList.length?c()({message:"剩余抽奖人数不足",type:"warning",duration:5e3}):(this.showPrize=!1,this.isStart=!0,this.$refs.Lucky.start())},stopLucky:function(){this.isStart=!1,this.showNext=!0,this.$refs.Lucky.stop(),this.showWinners=!0;var t=this.prizeRecordList.map((function(t){return G({},t,{name:t.userName})}));this.winners=this.computedWinners(this.prize.amount,t),0!==this.winners.length&&(this.savePrizeRecord(this.winners),this.level--)},computedWinners:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=this.users.filter((function(t){return!e.some((function(e){return e.dept===t.dept&&e.name===t.name}))}));if(0===r.length)return[];var i=r.length-1,a=Math.random()*i|0;if(n.push(r[a]),t--,t>0){var s=JSON.parse(JSON.stringify(e));s.push(r[a]),n=n.concat(this.computedWinners(t,s))}return n},showResultDialog:function(){0!==this.prizeRecordList.length?(this.showWinners=!1,this.showPrize=!1,this.showResult=!0):c()({message:"暂无抽奖记录",type:"warning",duration:3e3})},next:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.showWinners=!1,this.showNext=!1,t.next=4,this.$refs.Lucky.change();case 4:this.level>0&&(this.showPrize=!0);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),reset:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.a.confirm("是否重置本次抽奖记录！","提示",{confirmButtonText:"重置",cancelButtonText:"取消",type:"warning"});case 2:return this.showWinners=!1,this.showNext=!1,t.next=6,this.deletePrizeRecord();case 6:return this.level=this.prizeList[this.prizeList.length-1].prizeLevel,t.next=9,this.$nextTick();case 9:return t.next=11,this.$refs.Lucky.change();case 11:this.showPrize=!0,this.prizeRecordList=[],this.winners=[];case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},H=K,Q=(n("003d"),Object(y["a"])(H,r,i,!1,null,"2601eaa0",null));e["default"]=Q.exports},d81d:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").map,a=n("d039"),s=n("1dde"),o=s("map"),c=o&&!a((function(){[].map.call({length:-1,0:1},(function(t){throw t}))}));r({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dc36:function(t,e,n){var r={"./prize/1.jpg":"5650","./users/1.jpg":"9c7d"};function i(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=a,t.exports=i,i.id="dc36"},dfc2:function(t,e,n){t.exports=n.p+"img/audio.04d20caf.png"},ffc4:function(t,e,n){t.exports=n.p+"img/reset.db01a4eb.png"}}]);
//# sourceMappingURL=chunk-946a55ee.c0816ecf.js.map