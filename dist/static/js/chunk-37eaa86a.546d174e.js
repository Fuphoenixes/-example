(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37eaa86a"],{"139c":function(e,t,n){"use strict";var r=n("eb93"),a=n.n(r);a.a},8736:function(e,t,n){"use strict";var r=n("cfde"),a=n.n(r);a.a},"90fe":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-page"},[n("lb-table",{directives:[{name:"loading",rawName:"v-loading",value:e.$loadingPlugin.fetchData,expression:"$loadingPlugin.fetchData"}],attrs:{column:e.tableData.column,data:e.tableData.data,"element-loading-text":"Loading",border:"","highlight-current-row":"",pagination:"","page-size":e.tableData.pageSize,total:e.tableData.total,"custom-column":"","table-key":"example-table"},on:{"p-current-change":e.pageCurrentChange,"size-change":e.sizeChange,refresh:e.refresh,changeee:e.change}})],1)},a=[],l=n("a08c"),o=n.n(l),i=n("b775");function s(e){return Object(i["a"])({url:"/vue-admin-template/table/list",method:"get",data:e})}var c,u,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lb-table"},[n("el-table",e._g(e._b({ref:"elTable",class:{nowrap:!e.renderWrap},attrs:{data:e.data,"span-method":this.merge?this.mergeMethod:this.spanMethod}},"el-table",e.$attrs,!1),e.$listeners),e._l(e.renderColumn,(function(t,r){return n("lb-column",e._b({key:r,attrs:{column:t}},"lb-column",e.$attrs,!1))})),1),e._v(" "),e.pagination?n("el-pagination",e._g(e._b({staticClass:"lb-table-pagination",style:{"margin-top":e.paginationTop,"text-align":e.paginationAlign},attrs:{background:e.background,"page-size":e.pageSize,layout:e.layout.includes("slot")?e.layout:e.layout+",slot"},on:{"update:pageSize":e.pageSizeChange,"current-change":e.paginationCurrentChange}},"el-pagination",e.$attrs,!1),e.$listeners),[n("el-button",{attrs:{icon:"el-icon-refresh",type:e.background?"primary":"default",size:"mini",circle:""},on:{click:e.refresh}}),e._v(" "),e.customColumn?n("el-button",{attrs:{icon:"el-icon-setting",type:e.background?"primary":"default",size:"mini",round:""},on:{click:e.openCustomColumn}},[e._v("自定义列")]):e._e()],1):e._e(),e._v(" "),n("lb-custom-column",{ref:"lbCustomColumn",attrs:{showPageSizeSet:e.layout.includes("sizes"),"table-key":e.tableKey}})],1)},d=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table-column",e._g(e._b({attrs:{prop:e.column.prop,label:e.column.label,type:e.column.type,index:e.column.index,"column-key":e.column.columnKey,width:e.column.width,"min-width":e.column.minWidth,fixed:e.column.fixed,"render-header":e.column.renderHeader,sortable:e.column.sortable||!1,"sort-method":e.column.sortMethod,"sort-by":e.column.sortBy,"sort-orders":e.column.sortOrders,resizable:e.column.resizable||!0,formatter:e.column.formatter,"show-overflow-tooltip":e.column.showOverflowTooltip||!1,align:e.column.align||e.align||"left","header-align":e.column.headerAlign||e.headerAlign||e.column.align||e.align||"left","class-name":e.column.className,"label-class-name":e.column.labelClassName,selectable:e.column.selectable,"reserve-selection":e.column.reserveSelection||!1,filters:e.column.filters,"filter-placement":e.column.filterPlacement,"filter-multiple":e.column.filterMultiple,"filter-method":e.column.filterMethod,"filtered-value":e.column.filteredValue},scopedSlots:e._u([{key:"header",fn:function(t){return[e.column.renderHeader?n("lb-render",{attrs:{scope:t,render:e.column.renderHeader}}):n("span",[e._v(e._s(t.column.label))])]}},{key:"default",fn:function(t){return[n("lb-render",{attrs:{scope:t,render:e.column.render}})]}}])},"el-table-column",e.$attrs,!1),e.$listeners),[e._v(" "),e._v(" "),e.column.children?e._l(e.column.children,(function(e,t){return n("lb-column",{key:t,attrs:{column:e}})})):e._e()],2)},h=[],f={name:"LbRender",functional:!0,props:{scope:Object,render:Function},render:function(e,t){return t.props.render?t.props.render(e,t.props.scope):""}},g=f,b=n("e90a"),v=Object(b["a"])(g,c,u,!1,null,null,null),y=v.exports,w={selection:{renderHeader:function(e,t){var n=t.store;return e("el-checkbox",{attrs:{disabled:n.states.data&&0===n.states.data.length,indeterminate:n.states.selection.length>0&&!n.states.isAllSelected,value:n.states.isAllSelected},nativeOn:{click:n.toggleAllSelection}})},renderCell:function(e,t){var n=t.row,r=t.column,a=t.store,l=t.$index;return e("el-checkbox",{nativeOn:{click:function(e){return e.stopPropagation()}},attrs:{value:a.isSelected(n),disabled:!!r.selectable&&!r.selectable.call(null,n,l)},on:{input:function(){a.commit("rowSelectedChanged",n)}}})},sortable:!1,resizable:!1},index:{renderHeader:function(e,t){return e("span",[t.column.label||"#"])},renderCell:function(e,t){var n=t.$index,r=t.column,a=n+1,l=r.index;return"number"===typeof l?a=n+l:"function"===typeof l&&(a=l(n)),e("div",[a])},sortable:!1},expand:{renderHeader:function(e,t){return e("span",[t.column.label||""])},renderCell:function(e,t,n){var r=t.row,a=t.store,l=a.states.expandRows.indexOf(r)>-1;return e("div",{class:"el-table__expand-icon "+(l?"el-table__expand-icon--expanded":""),on:{click:function(e){return n.handleExpandClick(r,e)}}},[e("i",{class:"el-icon el-icon-arrow-right"})])},sortable:!1,resizable:!1,className:"el-table__expand-column"}},S={name:"LbColumn",props:{column:Object,headerAlign:String,align:String},components:{LbRender:y},methods:{setColumn:function(){this.$createElement;this.column.type&&(this.column.renderHeader=w[this.column.type].renderHeader,this.column.render=this.column.render||w[this.column.type].renderCell),this.column.formatter&&(this.column.render=function(e,t){return e("span",[t.column.formatter(t.row,t.column,t.row,t.$index)])}),this.column.render||(this.column.render=function(e,t){return e("span",[t.row[t.column.property]])})}},watch:{column:{handler:function(){this.setColumn()},immediate:!0}}},x=S,C=Object(b["a"])(x,m,h,!1,null,null,null),_=C.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"dialog",attrs:{title:"自定义列选择",width:"500px","destroy-on-close":"",visible:e.visible},on:{closed:e.close,"update:visible":function(t){e.visible=t}}},[n("el-table",{ref:"dragTable",attrs:{border:"",size:"mini",data:e.tableData,"row-key":"itemKey","cell-class-name":e.dragHandle},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"index",width:"30",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{type:"selection",width:"46",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"label",label:"列名",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"移动",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("i",{staticClass:"el-icon-top",on:{click:function(t){return e.up(r)}}}),e._v(" "),n("i",{staticClass:"el-icon-bottom",on:{click:function(t){return e.down(r)}}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"拖拽",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-rank"})]}}])})],1),e._v(" "),n("div",{staticClass:"check"},[n("el-checkbox",{staticStyle:{"margin-top":"2px"},model:{value:e.wrap,callback:function(t){e.wrap=t},expression:"wrap"}},[e._v("列宽自动换行")]),e._v(" "),e.showPageSizeSet?n("div",{staticStyle:{"margin-left":"40px"}},[n("span",[e._v("每页默认")]),e._v(" "),n("el-select",{staticStyle:{width:"70px"},attrs:{size:"mini"},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}},e._l(e.options,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v(" "),n("span",[e._v("条记录")])],1):e._e()],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.reset}},[e._v("重 置")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)],1)},D=[],z=n("2480");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){return T(e)||E(e)||A(e)||I()}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(e,t){if(e){if("string"===typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function E(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function T(e){if(Array.isArray(e))return K(e)}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L={props:["showPageSizeSet","tableKey"],data:function(){return{visible:!1,tableData:null,multipleSelection:[],options:[10,20,30,40,50,100],wrap:!1,pageSize:void 0}},methods:{open:function(e,t,n){var r=this;return new Promise((function(a){if(r.resolve=a,e&&0!==e.length){r.wrap=t,r.pageSize=n;var l=P(e),o=[],i=[];l.forEach((function(e,t){e.type||!e.label?o.push({index:t,item:e}):i.push(e)})),r.typeCols=o,r.tableData=i,r.visible=!0,r.$nextTick((function(){r.setSort(),r.tableData.forEach((function(e){r.$refs.dragTable.toggleRowSelection(e,e.show)}))}))}else a([])}))},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=z["a"].create(t,{ghostClass:"lb-custom-colnum-ghost",handle:".drag-handle",setData:function(e){e.setData("Text","")},onEnd:function(t){var n=e.tableData.splice(t.oldIndex,1)[0];e.tableData.splice(t.newIndex,0,n)}})},dragHandle:function(e){var t=e.columnIndex;if(4===t)return"drag-handle"},up:function(e){var t=this.tableData.findIndex((function(t){return t.itemKey===e.itemKey}));if(0!==t){var n=t-1,r=this.tableData.splice(t,1)[0];this.tableData.splice(n,0,r)}},down:function(e){var t=this.tableData.findIndex((function(t){return t.itemKey===e.itemKey}));if(t!==this.tableData.length-1){var n=t+1,r=this.tableData.splice(t,1)[0];this.tableData.splice(n,0,r)}},save:function(){var e=this,t=this.tableData.map((function(t){return e.multipleSelection.some((function(e){return e.itemKey===t.itemKey}))?k({},t,{show:!0}):k({},t,{show:!1})}));this.typeCols.forEach((function(e){t.splice(e.index,0,e.item)})),this.resolve,this.resolve({column:t,wrap:this.wrap,pageSize:this.pageSize}),this.visible=!1},reset:function(){this.visible=!1;var e="lb-table-"+this.$route.path+this.tableKey;localStorage.removeItem(e),this.$message("自定义列已重置为系统默认值，刷新页面即可生效")},close:function(){this.tableData=[],this.multipleSelection=[]},handleSelectionChange:function(e){this.multipleSelection=e}}},M=L,R=(n("139c"),n("e686"),Object(b["a"])(M,O,D,!1,null,"c3fe6ca8",null)),H=R.exports;function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t,n,r,a,l,o){try{var i=e[l](o),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(r,a)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function o(e){J(l,r,a,o,i,"next",e)}function i(e){J(l,r,a,o,i,"throw",e)}o(void 0)}))}}var q={name:"lb-table",props:{column:Array,data:Array,spanMethod:Function,pagination:{type:Boolean,default:!1},paginationTop:{type:String,default:"15px"},paginationAlign:{type:String,default:"right"},layout:{type:String,default:"sizes, prev, pager, next, jumper, ->, total"},wrap:{type:Boolean,default:!1},background:{type:Boolean,default:!0},tableKey:{type:String,default:""},pageSize:{type:Number,default:10},customColumn:{type:Boolean,default:!1},merge:Array},components:{LbColumn:_,LbCustomColumn:H},data:function(){return{mergeLine:{},mergeIndex:{},renderColumn:[],storeColumn:[],renderWrap:!1}},beforeCreate:function(){this.$emit("changeee",111)},created:function(){this.getMergeArr(this.data,this.merge)},computed:{dataLength:function(){return this.data.length}},methods:{clearSelection:function(){this.$refs.elTable.clearSelection()},toggleRowSelection:function(e,t){this.$refs.elTable.toggleRowSelection(e,t)},toggleAllSelection:function(){this.$refs.elTable.toggleAllSelection()},toggleRowExpansion:function(e,t){this.$refs.elTable.toggleRowExpansion(e,t)},setCurrentRow:function(e){this.$refs.elTable.setCurrentRow(e)},clearSort:function(){this.$refs.elTable.clearSort()},clearFilter:function(e){this.$refs.elTable.clearFilter(e)},doLayout:function(){this.$refs.elTable.doLayout()},sort:function(e,t){this.$refs.elTable.sort(e,t)},paginationCurrentChange:function(e){this.$emit("p-current-change",e)},refresh:function(){this.$emit("refresh")},pageSizeChange:function(e){this.$emit("update:pageSize",e)},getMergeArr:function(e,t){var n=this;t&&(this.mergeLine={},this.mergeIndex={},t.forEach((function(t,r){e.forEach((function(r,a){0===a?(n.mergeIndex[t]=n.mergeIndex[t]||[],n.mergeIndex[t].push(1),n.mergeLine[t]=0):r[t]===e[a-1][t]?(n.mergeIndex[t][n.mergeLine[t]]+=1,n.mergeIndex[t].push(0)):(n.mergeIndex[t].push(1),n.mergeLine[t]=a)}))})))},mergeMethod:function(e){e.row;var t=e.column,n=e.rowIndex,r=(e.columnIndex,this.merge.indexOf(t.property));if(r>-1){var a=this.mergeIndex[this.merge[r]][n],l=a>0?1:0;return{rowspan:a,colspan:l}}},openCustomColumn:function(){var e=F(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.lbCustomColumn.open(this.storeColumn,this.renderWrap,this.pageSize);case 2:t=e.sent,this.storeColumn=t.column,this.renderColumn=t.column.filter((function(e){return e.show})),this.renderWrap=t.wrap,t.pageSize!==this.pageSize&&this.$emit("size-change",t.pageSize),n="lb-table-"+this.$route.path+this.tableKey,r=t.column.map((function(e){return{label:e.label||"",itemKey:e.itemKey,show:e.show}})),t.column=r,localStorage.setItem(n,JSON.stringify(t));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getStoreSetting:function(){var e="lb-table-"+this.$route.path+this.tableKey,t=localStorage.getItem(e);return t?JSON.parse(t):null}},watch:{merge:function(){this.getMergeArr(this.data,this.merge)},dataLength:function(){this.getMergeArr(this.data,this.merge)},column:{handler:function(e){var t=this.getStoreSetting();if(this.customColumn&&t&&t.column&&t.column.length===e.length){var n=[];t.column.forEach((function(t){var r=e[t.itemKey];n.push(W({},r,{show:t.show,itemKey:t.itemKey}))})),this.storeColumn=n,this.renderColumn=n.filter((function(e){return e.show}))}else this.storeColumn=e.map((function(e,t){return W({},e,{itemKey:t,show:!0})})),this.renderColumn=e},immediate:!0},wrap:{handler:function(e){var t=this.getStoreSetting();this.customColumn&&t?this.renderWrap=t.wrap:this.renderWrap=e},immediate:!0}}},U=q,V=(n("8736"),Object(b["a"])(U,p,d,!1,null,"fdbc2bac",null)),G=V.exports,Q=n("a18c");G.install=function(e){e.component(G.name,G)};var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n="lb-table-"+Q["c"].currentRoute.path+e,r=localStorage.getItem(n);if(r){var a=JSON.parse(r);a.pageSize&&(t=a.pageSize)}return t};G.getStorePageSize=X;var Y=G;function Z(e,t,n,r,a,l,o){try{var i=e[l](o),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(r,a)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function o(e){Z(l,r,a,o,i,"next",e)}function i(e){Z(l,r,a,o,i,"throw",e)}o(void 0)}))}}var te={name:"example-table",components:{LbTable:Y},data:function(){this.$createElement;return{autoScroll:!1,tableData:{pageSize:Y.getStorePageSize("example-table")||10,pageIndex:1,total:0,column:[{type:"index",align:"center",label:"ID",width:60},{prop:"title",label:"Title"},{prop:"author",label:"Author",align:"center",width:110},{prop:"pageviews",label:"Pageviews",align:"center",width:110},{label:"Status",align:"center",width:110,className:"status-col",render:function(e,t){var n={published:"success",draft:"gray",deleted:"danger"};return e("el-tag",{attrs:{type:n[t.row.status]}},[t.row.status])}},{label:"Display_time",align:"center",width:200,render:function(e,t){return e("div",[e("i",{class:"el-icon-time"}),e("span",[t.row.display_time])])}}],data:[]}}},created:function(){this.fetchData(),console.log(1212)},methods:{fetchData:function(){var e=ee(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s({pageIndex:this.tableData.pageIndex,pageSize:this.tableData.pageSize});case 2:t=e.sent,this.tableData.data=t.data.items,this.tableData.total=t.data.total;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),pageCurrentChange:function(e){this.tableData.pageIndex=e,this.fetchData()},refresh:function(){this.tableData.pageIndex=1,this.fetchData()},sizeChange:function(e){this.tableData.pageIndex=1,this.tableData.pageSize=e,this.fetchData()},change:function(e){console.log(e,this)}}},ne=te,re=Object(b["a"])(ne,r,a,!1,null,null,null);t["default"]=re.exports},"998c":function(e,t,n){},cfde:function(e,t,n){},e686:function(e,t,n){"use strict";var r=n("998c"),a=n.n(r);a.a},eb93:function(e,t,n){}}]);