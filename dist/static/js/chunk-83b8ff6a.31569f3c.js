(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83b8ff6a"],{"0230":function(e,t,a){"use strict";var r=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=r(a("3b8d")),i=a("2423"),l=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],s={name:"add-dialog",data:function(){return{visible:!1,calendarTypeOptions:l,statusOptions:["published","draft","deleted"],title:"添加",temp:{id:void 0,importance:1,remark:"",timestamp:new Date,title:"",type:"",status:"published"},rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]}}},methods:{open:function(e){var t=this;return new Promise((function(a){t.resolve=a,t.visible=!0,e&&(t.temp=e,t.title="编辑")}))},success:function(){var e=(0,n.default)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.dataForm.validate();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:"添加"===this.title?this.add():this.edit();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),add:function(){var e=(0,n.default)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object.assign({},this.temp),t.id=parseInt(100*Math.random())+1024,e.next=4,(0,i.createArticle)(t);case 4:this.resolve(t),this.visible=!1,this.$notify({title:"提示",message:"添加成功",type:"success",duration:2e3});case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),edit:function(){var e=(0,n.default)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object.assign({},this.temp),t.timestamp=+new Date(t.timestamp),e.next=4,(0,i.updateArticle)(t);case 4:this.resolve(t),this.visible=!1,this.$notify({title:"提示",message:"更新成功",type:"success",duration:2e3});case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),reset:function(){this.title="添加",this.$refs.dataForm.resetFields()}}};t.default=s},1964:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("fu-page",{attrs:{"show-header":!1,"body-style":"padding-bottom: 0;","show-export":"","export-loading":e.$loadingPlugin.exportOut},on:{export:e.exportOut}},[a("el-table-form",{attrs:{model:e.listQuery},scopedSlots:e._u([{key:"btns",fn:function(){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh"}},[e._v("重置")])]},proxy:!0}])},[a("el-form-item",{attrs:{label:"时间：","table-form-merge":2}},[a("label",{attrs:{slot:"label"},slot:"label"},[e._v("时  间：")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.listQuery.date,callback:function(t){e.$set(e.listQuery,"date",t)},expression:"listQuery.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标题："}},[a("label",{attrs:{slot:"label"},slot:"label"},[e._v("标  题：")]),e._v(" "),a("el-input",{attrs:{placeholder:"title",clearable:""},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重要性："}},[a("label",{attrs:{slot:"label"},slot:"label"},[e._v("重 要 性：")]),e._v(" "),a("el-select",{attrs:{placeholder:"Imp",clearable:""},model:{value:e.listQuery.importance,callback:function(t){e.$set(e.listQuery,"importance",t)},expression:"listQuery.importance"}},e._l(e.importanceOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类型：",prop:"type"}},[a("label",{attrs:{slot:"label"},slot:"label"},[e._v("类  型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"Type",clearable:""},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},e._l(e.calendarTypeOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name+"("+e.key+")",value:e.key}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"status"}},[a("label",{attrs:{slot:"label"},slot:"label"},[e._v("状  态：")]),e._v(" "),a("el-select",{attrs:{placeholder:"Type",clearable:""},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.index,attrs:{label:e,value:e}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[a("label",{attrs:{slot:"label"},slot:"label"},[e._v("排  序：")]),e._v(" "),a("el-select",{model:{value:e.listQuery.sort,callback:function(t){e.$set(e.listQuery,"sort",t)},expression:"listQuery.sort"}},e._l(e.sortOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.add}},[e._v("添加")])],1),e._v(" "),a("lb-table",{directives:[{name:"loading",rawName:"v-loading",value:e.$loadingPlugin.fetchData,expression:"$loadingPlugin.fetchData"},{name:"el-height-adaptive-table",rawName:"v-el-height-adaptive-table",value:{bottomOffset:10},expression:"{bottomOffset:10}"}],ref:"lbTable",attrs:{border:"",stripe:"","element-loading-text":"加载中",column:e.tableData.column,data:e.tableData.data,"highlight-current-row":"",pagination:"",total:e.tableData.total,"custom-column":"","table-key":"table-complex"},on:{fetch:e.fetchData,"sort-change":e.sortChange}}),e._v(" "),a("add-dialog",{ref:"AddDialog"})],1)},n=[];a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}))},2423:function(e,t,a){"use strict";var r=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.fetchList=i,t.fetchArticle=l,t.fetchPv=s,t.createArticle=o,t.updateArticle=u;var n=r(a("b775"));function i(e){return(0,n.default)({url:"/mock/article/list",method:"get",data:e})}function l(e){return(0,n.default)({url:"/mock/article/detail",method:"get",params:{id:e}})}function s(e){return(0,n.default)({url:"/mock/article/pv",method:"get",params:{pv:e}})}function o(e){return(0,n.default)({url:"/mock/article/create",method:"post",data:e})}function u(e){return(0,n.default)({url:"/mock/article/update",method:"post",data:e})}},"261d":function(e,t,a){"use strict";a.r(t);var r=a("ddfb"),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);t["default"]=n.a},"386d":function(e,t,a){"use strict";var r=a("cb7c"),n=a("83a1"),i=a("5f1b");a("214f")("search",1,(function(e,t,a,l){return[function(a){var r=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,r):new RegExp(a)[t](String(r))},function(e){var t=l(a,e,this);if(t.done)return t.value;var s=r(e),o=String(this),u=s.lastIndex;n(u,0)||(s.lastIndex=0);var c=i(s,o);return n(s.lastIndex,u)||(s.lastIndex=u),null===c?-1:c.index}]}))},"55ac":function(e,t,a){"use strict";a.r(t);var r=a("1964"),n=a("261d");for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);var l=a("2877"),s=Object(l["a"])(n["default"],r["a"],r["b"],!1,null,null,null);t["default"]=s.exports},"71bf":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.json2Excel=void 0;var r=function(e){return window.btoa(unescape(encodeURIComponent(e)))},n=function(e,t){var a=document.createElement("a");document.body.appendChild(a),a.style.display="none",a.href=e,a.download=t,a.click(),a.remove()},i=function(e){for(var t=e.tableDom,a=e.worksheet,i=e.filename,l="data:application/vnd.ms-excel;base64,",s=t.getElementsByTagName("td"),o=0;o<s.length;o++){var u=s[o].style.cssText;u+="mso-number-format:'\\@'",s[o].setAttribute("style",u)}var c='<html \n                      xmlns:o="urn:schemas-microsoft-com:office:office" \n                      xmlns:x="urn:schemas-microsoft-com:office:excel" \n                      xmlns="http://www.w3.org/TR/REC-html40"\n                    >\n                      <head>\n                        \x3c!--[if gte mso 9]>\n                          <xml>\n                            <x:ExcelWorkbook>\n                              <x:ExcelWorksheets>\n                               <x:ExcelWorksheet>\n                                  <x:Name>'.concat(a,"</x:Name>\n                                  <x:WorksheetOptions>\n                                    <x:DisplayGridlines/>\n                                  </x:WorksheetOptions>\n                                </x:ExcelWorksheet>\n                              </x:ExcelWorksheets>\n                            </x:ExcelWorkbook>\n                          </xml>\n                        <![endif]--\x3e\n                        </head>\n                        <body>").concat(t.outerHTML,"</body>\n                      </html>");n(l+r(c),i+".xlsx")},l=function(e){var t=e.tableDom,a=e.worksheet,r=e.filename,l=void 0===r?"下载":r,s=e.bookType,o=void 0===s?"xlsx":s;if("xlsx"===o)i({tableDom:t,worksheet:a||"Sheet1",filename:l});else if("csv"===o){var u="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(t.outerHTML);n(u,l+".csv")}else if("txt"===o){var c="data:text/plain;charset=utf-8,\ufeff"+encodeURIComponent(t.outerHTML);n(c,l+".txt")}a&&"xlsx"!==o&&console.warn(o+"格式下载暂不支持设置worksheet")},s=function(e){var t=e.header,a=e.data,r=e.worksheet,n=e.filename,i=e.bookType,s="\n  <thead>\n    <tr>\n      ".concat(t.map((function(e){return"<th>".concat(e,"</th>")})).join(""),"\n    </tr>\n  </thead>\n  "),o="\n  <tbody>\n    ".concat(a.map((function(e){return"\n        <tr>\n          ".concat(e.map((function(e){return"<td>".concat(e,"</td>")})).join(""),"\n        </tr>\n      ")})).join(""),"\n  </tbody>\n  "),u=document.createElement("table");u.innerHTML=s+o,l({tableDom:u,worksheet:r,filename:n,bookType:i})};t.json2Excel=s;var o=l;t.default=o},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"97c8":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.visible},on:{"update:visible":function(t){e.visible=t},closed:e.reset}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"Type",prop:"type"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:e.temp.type,callback:function(t){e.$set(e.temp,"type",t)},expression:"temp.type"}},e._l(e.calendarTypeOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Date",prop:"timestamp"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"Please pick a date"},model:{value:e.temp.timestamp,callback:function(t){e.$set(e.temp,"timestamp",t)},expression:"temp.timestamp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Title",prop:"title"}},[a("el-input",{model:{value:e.temp.title,callback:function(t){e.$set(e.temp,"title",t)},expression:"temp.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Status"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:e.temp.status,callback:function(t){e.$set(e.temp,"status",t)},expression:"temp.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Imp"}},[a("el-rate",{staticStyle:{"margin-top":"8px"},attrs:{colors:["#99A9BF","#F7BA2A","#FF9900"],max:3},model:{value:e.temp.importance,callback:function(t){e.$set(e.temp,"importance",t)},expression:"temp.importance"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Remark"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"Please input"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("\n      取消\n    ")]),e._v(" "),a("el-button",{attrs:{loading:e.$loadingPlugin.add||e.$loadingPlugin.edit,type:"primary"},on:{click:e.success}},[e._v("\n      确定\n    ")])],1)],1)},n=[];a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}))},c940:function(e,t,a){"use strict";a.r(t);var r=a("97c8"),n=a("f914");for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);var l=a("2877"),s=Object(l["a"])(n["default"],r["a"],r["b"],!1,null,"d9916194",null);t["default"]=s.exports},ddfb:function(e,t,a){"use strict";var r=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("386d");var n=r(a("db72"));a("96cf");var i=r(a("3b8d"));a("ac6a");var l=r(a("75fc")),s=a("2423"),o=a("ed08"),u=a("71bf"),c=r(a("c940")),d=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],p=d.reduce((function(e,t){return e[t.key]=t.display_name,e}),{}),m=function(e){return p[e]},f={name:"table-complex",components:{AddDialog:c.default},data:function(){var e=this;this.$createElement;return{importanceOptions:[1,2,3],calendarTypeOptions:d,sortOptions:[{label:"ID 升序",key:"+id"},{label:"ID 降序",key:"-id"}],statusOptions:["published","draft","deleted"],listQuery:{date:"",importance:void 0,title:void 0,type:void 0,status:void 0,sort:"+id"},tableData:{total:0,column:[{align:"center",prop:"id",label:"ID",width:60,sortable:"custom"},{label:"Date",width:150,render:function(e,t){return e("span",[(0,o.parseTime)(t.row.timestamp,"{y}-{m}-{d} {h}:{i}")])}},{label:"Title",minWidth:110,render:function(e,t){var a=t.row;return e("div",{style:"display: inline;"},[e("span",{class:"link-type"},[a.title])])}},{prop:"author",label:"Author",align:"center",width:110},{prop:"reviewer",label:"Reviewer",align:"center",width:110},{label:"重要性",width:80,render:function(e,t){var a=t.row;return(0,l.default)(new Array(a.importance).keys()).map((function(t){return e("svg-icon",{key:t,attrs:{"icon-class":"star"},class:"meta-item__icon"})}))}},{label:"Readings",align:"center",width:95,render:function(e,t){var a=t.row;return a.pageviews?e("span",{class:"link-type"},[a.pageviews]):e("span",["0"])}},{label:"Status",align:"center",width:110,className:"status-col",render:function(e,t){var a={published:"success",draft:"info",deleted:"danger"};return e("el-tag",{attrs:{type:a[t.row.status]}},[t.row.status])}},{label:"操作",align:"center",fixed:"right",width:180,render:function(t,a){var r=a.row,n=a.$index;return t("div",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(){return e.update(r,n)}}},["编辑"]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(){return e.del(r,n)}}},["删除"])])}}],data:[]}}},methods:{fetchData:function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(t){var a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.pageSize,r=t.currentPage,e.next=3,(0,s.fetchList)((0,n.default)({},this.listQuery,{pageSize:a,pageIndex:r}));case 3:i=e.sent,this.tableData.data=i.data.items,this.tableData.total=i.data.total;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),search:function(){this.$refs.lbTable.fetch({currentPage:1})},sortChange:function(e){var t=e.prop,a=e.order;"id"===t&&(this.listQuery.sort="ascending"===a?"+id":"-id",this.search())},add:function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.AddDialog.open();case 2:t=e.sent,this.tableData.data.unshift(t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),update:function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(t,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.AddDialog.open((0,n.default)({},t));case 2:r=e.sent,this.tableData.data.splice(a,1,r);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),del:function(e,t){this.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}),this.tableData.data.splice(t,1)},exportOut:function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(){var t,a,r,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(11),e.next=3,(0,s.fetchList)((0,n.default)({},this.listQuery,{pageSize:this.tableData.total,pageIndex:1}));case 3:t=e.sent,a=["ID","Date","Title","Author","Reviewer","重要性","Readings","Status"],r=["id","timestamp","title","author","reviewer","importance","pageviews","status"],i=t.data.items,l=this.formatJson(r,i),(0,u.json2Excel)({header:a,data:l,filname:"下载"});case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return"timestamp"===e?(0,o.parseTime)(t[e]):"title"===e?t[e]+"  "+m(t.type):"importance"===e?(0,l.default)(new Array(t.importance).keys()).map((function(e){return"★"})).join(" "):t[e]}))}))}}};t.default=f},f914:function(e,t,a){"use strict";a.r(t);var r=a("0230"),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);t["default"]=n.a}}]);